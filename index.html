<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MikuMiku</title>
    <link rel="icon" href="Assets/icon.png">
    <link rel="stylesheet" href="style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Slackey&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
</head>
<body>
<!--! Notifications & Control Buttons -->
    <p id="top-screen-message"></p>
    <div id="notification-background">
        <p class="notification-content" style="font-weight: bold;">Something unlocked</p>
        <p class="notification-content">Something unlocked 2</p>
    </div>
    <div id="control-buttons">
        <button onclick="volumeControl()" id="volume-button">
            <img src="Assets/volume.png" draggable="false">
        </button>
        <button onclick="autoSave()" id="auto-save-button">
            <img src="Assets/save.png" draggable="false">
        </button>
        <button onclick="statisticsControl()" id="statistics-button" style="display: none;">
            <img src="Assets/trophy.png" draggable="false">
        </button>
    </div>
    <div id="container">
<!--! Start -->
        <div class="menu" id="start-menu">
            <div id="start-menu-left">
                <div id="mode-details-container">
                    <div id="mode-details" style="display: none;">
                        <p id="mode-details-text"></p>
                    </div>
                </div>
                <img id="reimu-bounce" src="Assets/reimu_bounce.gif" draggable="false">
            </div>
            <div id="start-menu-right">
                <div id="start-menu-panel-container">
                    <img id="start-menu-panel" src="Assets/start_menu_panel.png" draggable="false">
                </div>
                <div id="start-menu-right-sub">
                    <div id="start-menu-title-container">
                        <p id="start-menu-title">MikuMiku</p>
                    </div>
                    <div id="start-menu-buttons">
                        <button onclick="startGame(`new`)" id="new-game-button">New Game</button>
                        <button onclick="startGame(`load`)" id="load-game-button">Last Save</button>
                        <button onclick="startGame(`speedrun`)" id="speedrun-mode-button">Speedrun Mode</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="menu" id="shop" style="display: none;">
<!--! Statistics -->
            <div id="statistics">
                <div id="statistics-header">
                    <img src="Assets/apple.png" draggable="false">
                    <p>Statistics</p>
                    <img src="Assets/gapple.png" draggable="false">
                </div>
                <div id="statistics-content">
                    <div class="statistics-entry">
                        <div class="statistics-category">
                            <img src="Assets/upgrade_time_limit.png" draggable="false">
                        </div>
                        <div class="statistics-name">
                            <p>Time Played</p>
                        </div>
                        <div class="statistics-value">
                            <p id="stat-time-played-value-display">0s</p>
                        </div>
                    </div>
                    <div class="statistics-entry">
                        <div class="statistics-category">
                            <img src="Assets/apple.png" draggable="false">
                        </div>
                        <div class="statistics-name">
                            <p>Apples Collected</p>
                        </div>
                        <div class="statistics-value">
                            <p id="stat-apples-collected-value-display">0</p>
                        </div>
                    </div>
                    <div class="statistics-entry">
                        <div class="statistics-category">
                            <img src="Assets/upgrade_dash.png" draggable="false">
                        </div>
                        <div class="statistics-name">
                            <p>Tiles Moved</p>
                        </div>
                        <div class="statistics-value">
                            <p id="stat-tiles-moved-value-display">0</p>
                        </div>
                    </div>
                    <div class="statistics-entry">
                        <div class="statistics-category">
                            <img src="Assets/gold.png" draggable="false">
                        </div>
                        <div class="statistics-name">
                            <p>Total Gold Collected</p>
                        </div>
                        <div class="statistics-value">
                            <p id="stat-gold-collected-value-display">0</p>
                        </div>
                    </div>
                    <div class="statistics-entry">
                        <div class="statistics-category">
                            <img src="Assets/gem.png" draggable="false">
                        </div>
                        <div class="statistics-name">
                            <p>Total Gems Collected</p>
                        </div>
                        <div class="statistics-value">
                            <p id="stat-gems-collected-value-display">0</p>
                        </div>
                    </div>
                    <p id="all-upgrades-text">You have bought all the upgrades in 0 days.</p>
                    <button onclick="saveProgress(true)" id="save-button">
                        <p>Save Progress</p>
                    </button>
                </div>
            </div>
<!--! Shop -->
            <div id="map">
                <!-- UPGRADE BONUS GOLD -->
                <div class="tile" id="upgrade-bonus-gold-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-bonus-gold-level-display">Level 0/10</p>
                        </div>
                        <img src="Assets/upgrade_bonus_gold.png" draggable="false">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Bonus Gold</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-bonus-gold-stat-display">Current: 0.00 (+1)</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-bonus-gold-price-display">Price: 12.00</p>
                                <img src="Assets/gold.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeBonusGold()" class="upgrade-button" id="upgrade-bonus-gold-unlock-button">Upgrade</button>
                            </div>
                        </div>
                    </div>
                </div>
<!-- UPGRADE MULTIPLY GOLD -->
                <div class="tile" id="upgrade-multiply-gold-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-multiply-gold-level-display">Level 0/10</p>
                        </div>
                        <img src="Assets/upgrade_multiply_gold.png" draggable="false">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Gold Multiplier</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-multiply-gold-stat-display">Current: x1.00 (+10%)</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-multiply-gold-price-display">Price: 18.00</p>
                                <img src="Assets/gold.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeMultiplyGold()" class="upgrade-button" id="upgrade-multiply-gold-unlock-button">Upgrade</button>
                            </div>
                        </div>
                    </div>
                </div>
<!-- UPGRADE TIME LIMIT -->
                <div class="tile" id="upgrade-time-limit-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-time-limit-level-display">Level 0/10</p>
                        </div>
                        <img src="Assets/upgrade_time_limit.png" draggable="false">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Time Limit</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-time-limit-stat-display">Current: 10s (+2s)</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-time-limit-price-display">Price: 8.00</p>
                                <img src="Assets/gold.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeTimeLimit()" class="upgrade-button" id="upgrade-time-limit-unlock-button">Upgrade</button>
                            </div>
                        </div>
                    </div>
                </div>
<!-- UPGRADE EXTRA TIME -->
                <div class="tile" id="upgrade-extra-time-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-extra-time-level-display">Level 0/10</p>
                        </div>
                        <img src="Assets/upgrade_extra_time.png" draggable="false">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Extra Time</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-extra-time-stat-display">Current: 30s (+5s)</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-extra-time-price-display">Price: 16.00</p>
                                <img src="Assets/gem.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeExtraTime()" class="upgrade-button" id="upgrade-extra-time-unlock-button">Upgrade</button>
                            </div>
                        </div>
                    </div>
                </div>
<!-- UPGRADE BONUS APPLES -->
                <div class="tile" id="upgrade-bonus-apples-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-bonus-apples-level-display">Level 0/10</p>
                        </div>
                        <img src="Assets/upgrade_bonus_apples.png" draggable="false">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Bonus Apples</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-bonus-apples-stat-display">Current: 1 (+1)</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-bonus-apples-price-display">Price: 32.00</p>
                                <img src="Assets/gold.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeBonusApples()" class="upgrade-button" id="upgrade-bonus-apples-unlock-button">Upgrade</button>
                            </div>
                        </div>
                    </div>
                </div>
<!-- UPGRADE GAPPLE CHANCE -->
                <div class="tile" id="upgrade-gapple-chance-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-gapple-chance-level-display">Level 0/10</p>
                        </div>
                        <img src="Assets/gapple.png" draggable="false">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Golden Apple Chance</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-gapple-chance-stat-display">Current: 0% (+10%)</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-gapple-chance-price-display">Price: 24.00</p>
                                <img src="Assets/gold.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeGappleChance()" class="big-upgrade-button" id="upgrade-gapple-chance-unlock-button">Upgrade</button>
                                <button onclick="upgradeGappleChanceDetails()" class="small-upgrade-button" id="upgrade-gapple-chance-details-button">?</button>
                            </div>
                        </div>
                    </div>
                </div>
<!-- UPGRADE DASH -->
                <div class="tile" id="upgrade-dash-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-dash-level-display">Level 0/1</p>
                        </div>
                        <img src="Assets/upgrade_dash.png" draggable="false">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Unlock Dashing</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-dash-stat-display">Current: Locked</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-dash-price-display">Price: 750.00</p>
                                <img src="Assets/gold.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeDash()" class="big-upgrade-button" id="upgrade-dash-unlock-button">Unlock</button>
                                <button onclick="dashEnable()" class="big-upgrade-button" id="enable-dash-button" style="display: none">Enable</button>
                                <button onclick="dashDisable()" class="big-upgrade-button" id="disable-dash-button" style="display: none">Disable</button>
                                <button onclick="upgradeDashDetails()" class="small-upgrade-button" id="upgrade-dash-details-button">?</button>
                            </div>
                        </div>
                    </div>
                </div>
<!-- UPGRADE PUT MIKU TO SLEEP -->
                <div class="tile" id="upgrade-sleep-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-sleep-level-display">Level 0/1</p>
                        </div>
                        <img src="Assets/upgrade_sleep.png" draggable="false" style="display: none" id="upgrade-sleep-miku-asleep">
                        <img src="Assets/sleepy_miku.png" draggable="false" id="upgrade-sleep-miku-awake">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Put Miku to sleep</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-sleep-stat-display">Current: Locked</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-sleep-price-display">Price: 400.00</p>
                                <img src="Assets/gem.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeSleep()" class="big-upgrade-button" id="upgrade-sleep-unlock-button">Unlock</button>
                                <button onclick="mikuSleep()" class="big-upgrade-button" id="put-miku-to-sleep-button" style="display: none">Put Miku to sleep</button>
                                <button onclick="mikuWake()" class="big-upgrade-button" id="wake-up-miku-button" style="display: none">Wake up Miku</button>
                                <button onclick="upgradeSleepDetails()" class="small-upgrade-button" id="upgrade-sleep-details-button">?</button>
                            </div>
                        </div>
                    </div>
                </div>
<!-- UPGRADE BONUS GEMS -->
                <div class="tile" id="upgrade-bonus-gems-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-bonus-gems-level-display">Level 0/10</p>
                        </div>
                        <img src="Assets/upgrade_bonus_gem.png" draggable="false">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Bonus Gems</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-bonus-gems-stat-display">Current: 0.00 (+1)</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-bonus-gems-price-display">Price: 18.00</p>
                                <img src="Assets/gem.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeBonusGems()" class="upgrade-button" id="upgrade-bonus-gems-unlock-button">Upgrade</button>
                            </div>
                        </div>
                    </div>
                </div>
<!-- UPGRADE MULTIPLY GEM -->
                <div class="tile" id="upgrade-multiply-gem-tile">
                    <div class="tile-image">
                        <div class="tile-level-container">
                            <p class="tile-level-value" id="upgrade-multiply-gem-level-display">Level 0/10</p>
                        </div>
                        <img src="Assets/upgrade_multiply_gem.png" draggable="false">
                    </div>
                    <div class="tile-details">
                        <div class="tile-title">
                            <p>Gem Multiplier</p>
                        </div>
                        <div class="tile-info">
                            <div class="upgrade-info">
                                <p id="upgrade-multiply-gem-stat-display">Current: x1.00 (+10%)</p>
                            </div>
                            <div class="upgrade-info price-tag">
                                <p id="upgrade-multiply-gem-price-display">Price: 18.00</p>
                                <img src="Assets/gem.png" draggable="false">
                            </div>
                            <div class="upgrade-buttons">
                                <button onclick="upgradeMultiplyGem()" class="upgrade-button" id="upgrade-multiply-gem-unlock-button">Upgrade</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
<!-- SIDE BAR -->
            <div class="right-side">
                <div class="default-right-side">
                    <div class="right-side-content currency-container">
                        <div>
                            <img src="Assets/gold.png" draggable="false">
                            <p id="shop-gold-display">0.00</p>
                        </div>
                        <div>
                            <img src="Assets/gem.png" draggable="false">
                            <p id="shop-gem-display">0.00</p>
                        </div>
                    </div>

                    <div class="right-side-content" id="shop-mode">
                        <div id="shop-mode-title">
                            <p>Shop Category</p>
                        </div>
                        <div id="shop-mode-content">
                            <div class="shop-mode-side">
                                <button onclick="previousShopMode()"><</button>
                            </div>
                            <div id="shop-mode-icon">
                                <img id="gold-shop-icon" src="Assets/gold.png" draggable="false">
                                <img id="other-shop-icon" src="Assets/apple.png" draggable="false">
                                <img id="special-shop-icon" src="Assets/star.png" draggable="false">
                                <img id="gem-shop-icon" src="Assets/gem.png" draggable="false">
                            </div>
                            <div class="shop-mode-side">
                                <button onclick="nextShopMode()">></button>
                            </div>
                        </div>
                    </div>
    
                    <div class="right-side-content day-container">
                        <div>
                            <p id="shop-day-display">Day 1</p>
                        </div>
                        <div>
                            <button onclick="beginDay()">Begin Day</button>
                        </div>
                    </div>
                </div>

                <div class="upgrade-details" id="upgrade-gapple-chance-details">
                    <p></p>
                    <p class="upgrade-details-title">Golden apples</p>
                    <img src="Assets/gapple.png" draggable="false">
                    <p class="upgrade-details-description">Golden apples overwrite some of the normal apples. Frequency depends on their upgrade level.</p>
                    <p class="upgrade-details-description">They yield double the gold and 1 gem each.</p>
                    <button onclick="upgradeGappleChance()" id="upgrade-gapple-chance-details-unlock-button">Upgrade</button>
                </div>

                <div class="upgrade-details" id="upgrade-dash-details">
                    <p></p>
                    <p class="upgrade-details-title">Dashing</p>
                    <img src="Assets/upgrade_dash.png" draggable="false">
                    <p class="upgrade-details-description">After unlocking this ability, you're able to dash to the nearest apple, or dash to the edge of the map if there aren't any apples on your way.</p>
                    <p class="upgrade-details-description">You can dash by holding shift and moving in any direction using WASD. Note that dashing works only with WASD.</p>
                    <div class="price-tag upgrade-details-price-tag">
                        <p>Price: 750.00</p>
                        <img src="Assets/gold.png" draggable="false">
                    </div>
                    <button onclick="upgradeDash()" id="upgrade-dash-details-unlock-button">Unlock</button>
                </div>

                <div class="upgrade-details" id="upgrade-sleep-details">
                    <p></p>
                    <p class="upgrade-details-title">Sleeping Miku</p>
                    <img src="Assets/upgrade_sleep.png" draggable="false" id="details-sleep-miku-asleep">
                    <img src="Assets/sleepy_miku.png" draggable="false" style="display: none" id="details-sleep-miku-awake">
                    <p class="upgrade-details-description">After making Miku fall asleep by turning off the internet, you can bump against the walls without being worried about losing your stuff.</p>
                    <p class="upgrade-details-description">You can wake up Miku again anytime you wish.</p>
                    <div class="price-tag upgrade-details-price-tag">
                        <p>Price: 400.00</p>
                        <img src="Assets/gem.png" draggable="false">
                    </div>
                    <button onclick="upgradeSleep()" id="upgrade-sleep-details-unlock-button">Unlock</button>
                    <button onclick="mikuSleep()" class="big-upgrade-button" style="display: none" id="details-sleep-miku-sleep-button">Put Miku to sleep</button>
                    <button onclick="mikuWake()" class="big-upgrade-button" style="display: none" id="details-sleep-miku-awake-button">Wake up Miku</button>
                </div>
            </div>
        </div>
<!--! Day -->
        <div class="menu" id="day" style="display: none">
            <div id="snake-map">
                <canvas id="snake"></canvas>
            </div>
<!-- SIDE BAR -->
            <div class="right-side">
                <div class="default-right-side">
                    <div class="currency-container">
                        <div>
                            <img src="Assets/gold.png" draggable="false">
                            <p id="day-gold-display">0.00</p>
                        </div>
                        <div>
                            <img src="Assets/gem.png" draggable="false">
                            <p id="day-gem-display">0.00</p>
                        </div>
                    </div>

                    <div class="time-container" id="time-container">
                        <div>
                            <p>Time left</p>
                        </div>
                        <div>
                            <p id="time-left-display">00s</p>
                        </div>
                    </div>

                    <div class="day-container">
                        <div>
                            <p id="day-day-display">Day 1</p>
                        </div>
                        <div>
                            <button onclick="nextDay()">Next Day</button>
                        </div>
                    </div>

                    <div class="currency-container" id="earned-currency-container">
                        <div>
                            <img src="Assets/earned_gold.png" draggable="false">
                            <p id="earned-gold-display">0</p>
                        </div>
                        <div>
                            <img src="Assets/earned_gem.png" draggable="false">
                            <p id="earned-gem-display">0</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.3/lib/p5.min.js"></script>
</body>
</html>